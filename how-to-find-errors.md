## Где искать ошибки, когда что-то не работает

### (и как их обрабатывать)

Прежде чем найти ошибку — собери как можно больше информации про неё:

---

1. Посмотри в консоль браузера
   - есть какие-то там ошибки? понятно ли, в каком месте в коде они возникают и почему?
2. Посмотри во вкладку Network в консоле бразуреа,
   - отправляются запросы по тому url, куда ты планировал? какой статус возвращается?
3. Ошибки на сервере

   - посмотри в консоль, где запущен сервер — есть ли там какие-то ошибки?
   - корректно ли прописаны роуты, на которые отправляется запрос?
   - принимает ли сервер данные из клиента и какие?
   - запросы к базе данных тоже могут вызвать ошибку, их можно обработать так, возвращая подходящий статус:

   ```js
   router.get('/', async (req, res) => {
     try {
       const data = await YourModel.findAll();
       res.json({ data });
     } catch (error) {
       res.status(500).json(error);
     }
   });
   
   router.post('/', async (req, res) => {
     try {
       const newElement = await YourModel.create(req.body);
       res.status(201).json(newThing);
     } catch (error) {
       res.status(500).json(error);
     }
   });
   ```

4. Ошибки на клиенте и обработка сетевых запросов

   - если действие пользователя не успешно — сообщаешь ли ты об этом ему? (Можно вывести ошибки в консоль, но лучше — отобразить ошибку в самом интерфейсе)
   - ошибка может возникнуть при отправке запроса, её можно обрабатывать так:

   ```js
   try {
     const response = await fetch('https://api.example.com');
     const data = await response.json(); // обработка данных в формате JSON
   } catch (error) {
     //обработать ошибку
     console.log(error);
   }
   ```

В этом случае сетевой запрос выполнить не удалось, и эта ошибка появится в консоли браузера

- ошибка может возникнуть при выполнении запроса, тогда стоит проверять статус или ответ от сервера

```js
try {
  const response = await fetch('https://api.example.com/data');
  //если HTTP статус не в диапазоне от 200 до 299, то брось ошибку —
  if (!response.ok) {
    //она попадет в следующий блок catch
    throw new Error('Ошибка при выполнении запроса');
  }
  const data = await response.json();
} catch (error) {
  //обработать ошибку
  console.log(error);
}
```

- обработка разных видов ошибок

```js
try {
  const response = await fetch('https://api.example.com/data');
  if (!response.ok) {
    throw new Error('Ошибка при выполнении запроса');
  }
  const data = await response.json();
} catch (error) {
  if (error.name === 'SyntaxError') {
    // Ошибки типа SyntaxError: Unexpected token '...' is not valid JSON
  } else if (error.name === 'TypeError') {
    // Обработка ошибки типа (например, проблемы с сетью)
  } else {
    // Обработка других ошибок
  }
}
```

Что может обозначать следующая ошибка?

```bash
SyntaxError: Unexpected token '...' is not valid JSON
```

Скорее всего, запрос отработал, но сервер ответил не в формате json, поэтому следующая строчка выдала ошибку:

```js
const data = response.json();
```

Нужно проверить, в каком формате отвечает сервер, какой статус отдаёт (и работает ли сервер вообще хыхы)
